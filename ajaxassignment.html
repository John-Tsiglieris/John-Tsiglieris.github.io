<!DOCTYPE html>
<html>
<style>
table,th,td {
  border : 1px solid black;
  border-collapse: collapse;
}
th,td {
  padding: 5px;
}
</style>
<body>
<h1>Homework 8 - AJAX Application</h1>

<button type="button" onclick="loadDoc()">Get CD collection</button>
<br><br>
<table id="demo"></table>

<script>
function loadDoc() {
  const xhttp = new XMLHttpRequest();
  xhttp.onload = function() {
    myFunction(this);
  }
  xhttp.open("GET", "cd_catalog.xml");
  xhttp.send();
}
function myFunction(xml) {
  const xmlDoc = xml.responseXML;
  const x = xmlDoc.getElementsByTagName("CD");
  let table="<tr><th>Artist</th><th>Title</th></tr>";
  for (let i = 0; i <x.length; i++) {
    table += "<tr><td>" +
    x[i].getElementsByTagName("ARTIST")[0].childNodes[0].nodeValue +
    "</td><td>" +
    x[i].getElementsByTagName("TITLE")[0].childNodes[0].nodeValue +
    "</td></tr>";
  }
  document.getElementById("demo").innerHTML = table;
}
</script>
<h2>Explanation of AJAX</h2>
<p>Upon clicking the button labeled "Get CD collection", loadDoc() is called. An XMLHttpRequest object is created. The onload() function is called passing the XMLHttpRequest object (this) as a parameter to myFunction(). The object opens the cd catalog .xml file, which triggers myFunction(). The .responseXML property fetches the document. We use .getElementsByTagName() to search for the CD tag and traverse the array for the Artist and Title tags, which are displayed on the HTML table.</p>
<h2>REST API</h2>
<p>I present to you the Catfacts API! Know any cat lovers in your life? Do you wish to educate them more about their beloved pets? How about just to smother your friends with cat facts? Want to disrupt social media political discouse with cat facts? Want to spam someones texts? Then this free API is right for you! There are a few requirements to set up Cat Facts on your own device. You will need:

    -An Android phone with SMS capabilities
    -Tasker (Android app for automation)
    -Node.js
    -Heroku CLI for deployment

Follow the instructions here at <a href="https://alexwohlbruck.github.io/cat-facts/docs/setup">Cat Facts Setup Page</a>. You will be asked to create a service token. Then you can connect your app to the github repository and implement the API as you wish! Keep in mind the response files will be in JSON format. In addition you can connect your android phone to automatically send cat facts via SMS, and Twitter bots are natively supported.
Get started with Cat Facts today for your malicious/benevolent use!</p><br>
<p>Additional resource:<a href="https://alexwohlbruck.github.io/cat-facts/?ref=apilist.fun">Cat facts Github</a></p>
<br>

<p class="link"><a href="./index.html">Back to main page</a></p>
</body>
</html>
